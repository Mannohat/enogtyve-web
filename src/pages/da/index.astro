---
import BaseLayout from "../../layouts/BaseLayout.astro";
import IntroAccordion from "../../components/home/IntroAccordion.astro";
import PromoSection from "../../components/home/PromoSection.astro";
import ShowcaseGrid from "../../components/home/ShowcaseGrid.astro";
import FeatureGrid from "../../components/home/FeatureGrid.astro";
import CTASection from "../../components/home/CTASection.astro";
import StatsBar from "../../components/home/StatsBar.astro";
import QuickActions from "../../components/home/QuickActions.astro";
import IntroBanner from "../../components/home/IntroBanner.astro";

const lang = "da";
---

<BaseLayout
	title="Dansk Bitcoin Fællesskab"
	description="Enogtyve er Danmarks Bitcoin-fællesskab. Lær om Bitcoin, Lightning Network, opbevaring, mining og meget mere. For nysgerrige på alle niveauer."
	lang={lang}
>
	<StatsBar />
	<IntroBanner lang={lang} />
	<QuickActions lang={lang} />
	<IntroAccordion />
	<div class="page-content">
		<PromoSection />
		<CTASection lang={lang} />
		<ShowcaseGrid />
		<FeatureGrid lang={lang} />
	</div>
	<div class="scroll-hint" aria-hidden="true"></div>
</BaseLayout>

<style>
	.scroll-hint {
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		height: 80px;
		background: linear-gradient(
			to top,
			var(--background) 0%,
			transparent 100%
		);
		pointer-events: none;
		z-index: 90;
		opacity: 1;
		transition: opacity 0.4s ease;
	}

	.scroll-hint.hidden {
		opacity: 0;
	}

	@media (prefers-reduced-motion: no-preference) {
		@media (min-width: 768px) {
			.page-content {
				scroll-snap-type: y proximity;
			}
			:global(section) {
				scroll-snap-align: start;
			}
		}
	}
</style>

<script>
	import { initializeSearch } from "../../scripts/searchHandler";
	initializeSearch();

	// Fade out scroll hint after user scrolls
	const scrollHint = document.querySelector(".scroll-hint");
	if (scrollHint) {
		window.addEventListener(
			"scroll",
			() => {
				if (window.scrollY > 100) {
					scrollHint.classList.add("hidden");
				} else {
					scrollHint.classList.remove("hidden");
				}
			},
			{ passive: true },
		);
	}
</script>
